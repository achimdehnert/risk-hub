# Generated by Django 5.2.10 on 2026-01-31 14:28

import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Area',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('site_id', models.UUIDField(db_index=True, help_text='FK zu tenancy.Site')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(blank=True, default='', help_text="Anlagenkennzeichen (z.B. 'E2-50.01')", max_length=50)),
                ('description', models.TextField(blank=True, default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Betriebsbereich',
                'verbose_name_plural': 'Betriebsbereiche',
                'db_table': 'ex_area',
                'constraints': [models.UniqueConstraint(condition=models.Q(('code__gt', '')), fields=('tenant_id', 'site_id', 'code'), name='uq_area_code_per_site')],
            },
        ),
        migrations.CreateModel(
            name='EquipmentType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(blank=True, db_index=True, help_text='NULL = global/system, UUID = tenant-spezifisch', null=True)),
                ('is_system', models.BooleanField(default=False, help_text='System-Daten sind global und nicht editierbar')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('manufacturer', models.CharField(max_length=200)),
                ('model', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, default='')),
                ('atex_group', models.CharField(choices=[('I', 'Gruppe I (Bergbau)'), ('II', 'Gruppe II (Industrie)')], default='II', max_length=5)),
                ('atex_category', models.CharField(blank=True, choices=[('1G', 'Kategorie 1G (Zone 0)'), ('2G', 'Kategorie 2G (Zone 0, 1)'), ('3G', 'Kategorie 3G (Zone 0, 1, 2)'), ('1D', 'Kategorie 1D (Zone 20)'), ('2D', 'Kategorie 2D (Zone 20, 21)'), ('3D', 'Kategorie 3D (Zone 20, 21, 22)')], default='', max_length=5)),
                ('protection_type', models.CharField(blank=True, choices=[('Ex d', 'Druckfeste Kapselung'), ('Ex e', 'Erhöhte Sicherheit'), ('Ex i', 'Eigensicherheit'), ('Ex p', 'Überdruckkapselung'), ('Ex m', 'Vergusskapselung'), ('Ex o', 'Ölkapselung'), ('Ex q', 'Sandkapselung'), ('Ex n', 'Nicht-funkend'), ('Ex t', 'Schutz durch Gehäuse (Staub)')], default='', max_length=10)),
                ('explosion_group', models.CharField(blank=True, choices=[('IIA', 'IIA (Propan)'), ('IIB', 'IIB (Ethylen)'), ('IIC', 'IIC (Wasserstoff, Acetylen)'), ('IIIA', 'IIIA (brennbare Flusen)'), ('IIIB', 'IIIB (nicht leitfähiger Staub)'), ('IIIC', 'IIIC (leitfähiger Staub)')], default='', max_length=10)),
                ('temperature_class', models.CharField(blank=True, choices=[('T1', 'T1 (≤450°C)'), ('T2', 'T2 (≤300°C)'), ('T3', 'T3 (≤200°C)'), ('T4', 'T4 (≤135°C)'), ('T5', 'T5 (≤100°C)'), ('T6', 'T6 (≤85°C)')], default='', max_length=5)),
                ('epl', models.CharField(blank=True, choices=[('Ga', 'Ga (sehr hohes Schutzniveau)'), ('Gb', 'Gb (hohes Schutzniveau)'), ('Gc', 'Gc (erhöhtes Schutzniveau)'), ('Da', 'Da (sehr hohes Schutzniveau - Staub)'), ('Db', 'Db (hohes Schutzniveau - Staub)'), ('Dc', 'Dc (erhöhtes Schutzniveau - Staub)')], default='', help_text='Equipment Protection Level', max_length=5)),
                ('ip_rating', models.CharField(blank=True, default='', help_text='z.B. IP65, IP66', max_length=10)),
                ('ambient_temp_min', models.IntegerField(blank=True, help_text='Min. Umgebungstemperatur in °C', null=True)),
                ('ambient_temp_max', models.IntegerField(blank=True, help_text='Max. Umgebungstemperatur in °C', null=True)),
                ('datasheet_url', models.URLField(blank=True, default='')),
                ('certificate_number', models.CharField(blank=True, default='', max_length=100)),
                ('notified_body', models.CharField(blank=True, default='', help_text="z.B. 'PTB', 'DEKRA', 'TÜV'", max_length=100)),
                ('default_inspection_interval_months', models.PositiveIntegerField(default=12, help_text='Standard-Prüfintervall in Monaten')),
            ],
            options={
                'verbose_name': 'Betriebsmitteltyp',
                'verbose_name_plural': 'Betriebsmitteltypen',
                'db_table': 'ex_equipment_type',
                'indexes': [models.Index(fields=['tenant_id', 'atex_category'], name='ex_equipmen_tenant__81fd50_idx'), models.Index(fields=['tenant_id', 'manufacturer'], name='ex_equipmen_tenant__19dcb3_idx')],
                'constraints': [models.UniqueConstraint(fields=('tenant_id', 'manufacturer', 'model'), name='uq_equipment_type_tenant_mfr_model')],
            },
        ),
        migrations.CreateModel(
            name='Equipment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('serial_number', models.CharField(blank=True, default='', max_length=100)),
                ('asset_number', models.CharField(blank=True, default='', help_text='Interne Anlagennummer', max_length=100)),
                ('location_detail', models.CharField(blank=True, default='', help_text="Genauer Standort (z.B. 'Halle 3, Ebene 2')", max_length=255)),
                ('status', models.CharField(choices=[('active', 'In Betrieb'), ('inactive', 'Außer Betrieb'), ('maintenance', 'In Wartung'), ('decommissioned', 'Stillgelegt')], default='active', max_length=20)),
                ('installation_date', models.DateField(blank=True, null=True)),
                ('last_inspection_date', models.DateField(blank=True, null=True)),
                ('next_inspection_date', models.DateField(blank=True, null=True)),
                ('inspection_interval_months', models.PositiveIntegerField(blank=True, help_text='Überschreibt Standard-Intervall des Typs', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='equipment', to='explosionsschutz.area')),
                ('equipment_type', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='instances', to='explosionsschutz.equipmenttype')),
            ],
            options={
                'verbose_name': 'Betriebsmittel',
                'verbose_name_plural': 'Betriebsmittel',
                'db_table': 'ex_equipment',
            },
        ),
        migrations.CreateModel(
            name='ExplosionConcept',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('assessment_id', models.UUIDField(blank=True, db_index=True, help_text='FK zu risk.Assessment (optional)', null=True)),
                ('substance_id', models.UUIDField(db_index=True, help_text='FK zu substances.Substance (UUID)')),
                ('substance_name', models.CharField(blank=True, default='', help_text='Cached Stoffname für Anzeige', max_length=255)),
                ('title', models.CharField(max_length=255)),
                ('version', models.PositiveIntegerField(default=1)),
                ('status', models.CharField(choices=[('draft', 'Entwurf'), ('in_review', 'In Prüfung'), ('approved', 'Freigegeben'), ('archived', 'Archiviert')], default='draft', max_length=20)),
                ('is_validated', models.BooleanField(default=False)),
                ('validated_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('area', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='explosion_concepts', to='explosionsschutz.area')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_concepts', to=settings.AUTH_USER_MODEL)),
                ('validated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='validated_concepts', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Explosionsschutzkonzept',
                'verbose_name_plural': 'Explosionsschutzkonzepte',
                'db_table': 'ex_concept',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Inspection',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('inspection_type', models.CharField(choices=[('initial', 'Erstprüfung'), ('periodic', 'Wiederkehrende Prüfung'), ('special', 'Sonderprüfung'), ('repair', 'Prüfung nach Instandsetzung')], default='periodic', max_length=20)),
                ('inspection_date', models.DateField()),
                ('inspector_name', models.CharField(max_length=200)),
                ('inspector_organization', models.CharField(blank=True, default='', help_text='z.B. ZÜS, befähigte Person', max_length=200)),
                ('result', models.CharField(choices=[('passed', 'Bestanden'), ('passed_notes', 'Bestanden mit Hinweisen'), ('failed', 'Nicht bestanden'), ('pending', 'Ausstehend')], default='pending', max_length=20)),
                ('findings', models.TextField(blank=True, default='')),
                ('recommendations', models.TextField(blank=True, default='')),
                ('certificate_number', models.CharField(blank=True, default='', max_length=100)),
                ('document_id', models.UUIDField(blank=True, help_text='FK zu documents.Document', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('equipment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inspections', to='explosionsschutz.equipment')),
            ],
            options={
                'verbose_name': 'Prüfung',
                'verbose_name_plural': 'Prüfungen',
                'db_table': 'ex_inspection',
                'ordering': ['-inspection_date'],
            },
        ),
        migrations.CreateModel(
            name='ReferenceStandard',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(blank=True, db_index=True, help_text='NULL = global/system, UUID = tenant-spezifisch', null=True)),
                ('is_system', models.BooleanField(default=False, help_text='System-Daten sind global und nicht editierbar')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('code', models.CharField(help_text="z.B. 'TRGS 720', 'IEC 60079-10-1'", max_length=50)),
                ('title', models.CharField(max_length=500)),
                ('category', models.CharField(choices=[('TRGS', 'Technische Regeln für Gefahrstoffe'), ('IEC', 'IEC Normen'), ('EN', 'Europäische Normen'), ('DIN', 'DIN Normen'), ('VDSI', 'VDSI Richtlinien'), ('INTERNAL', 'Interne Richtlinien')], default='TRGS', max_length=20)),
                ('url', models.URLField(blank=True, default='', help_text='Link zur offiziellen Quelle')),
                ('valid_from', models.DateField(blank=True, null=True)),
                ('valid_until', models.DateField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Regelwerksreferenz',
                'verbose_name_plural': 'Regelwerksreferenzen',
                'db_table': 'ex_reference_standard',
                'ordering': ['code'],
                'indexes': [models.Index(fields=['tenant_id', 'category'], name='ex_referenc_tenant__fd4ee6_idx')],
                'constraints': [models.UniqueConstraint(fields=('tenant_id', 'code'), name='uq_reference_standard_tenant_code'), models.UniqueConstraint(condition=models.Q(('tenant_id__isnull', True)), fields=('code',), name='uq_reference_standard_global_code')],
            },
        ),
        migrations.CreateModel(
            name='MeasureCatalog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(blank=True, db_index=True, help_text='NULL = global/system, UUID = tenant-spezifisch', null=True)),
                ('is_system', models.BooleanField(default=False, help_text='System-Daten sind global und nicht editierbar')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('code', models.CharField(blank=True, default='', help_text="Optionaler Kurzcode, z.B. 'M-ERD-001'", max_length=50)),
                ('title', models.CharField(max_length=300)),
                ('default_type', models.CharField(choices=[('primary', 'Primäre Maßnahme (Vermeidung)'), ('secondary', 'Sekundäre Maßnahme (Zündquellenvermeidung)'), ('tertiary', 'Tertiäre Maßnahme (Auswirkungsbegrenzung)'), ('organizational', 'Organisatorische Maßnahme')], default='secondary', max_length=20)),
                ('description_template', models.TextField(blank=True, default='', help_text='Vorlage für Beschreibung, kann Platzhalter enthalten')),
                ('reference_standards', models.ManyToManyField(blank=True, related_name='measure_catalog_entries', to='explosionsschutz.referencestandard')),
            ],
            options={
                'verbose_name': 'Maßnahmenkatalog',
                'verbose_name_plural': 'Maßnahmenkataloge',
                'db_table': 'ex_measure_catalog',
            },
        ),
        migrations.CreateModel(
            name='SafetyFunction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(blank=True, db_index=True, help_text='NULL = global/system, UUID = tenant-spezifisch', null=True)),
                ('is_system', models.BooleanField(default=False, help_text='System-Daten sind global und nicht editierbar')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text="Eindeutiger Name, z.B. 'GW-001' für Gaswarnanlage 001", max_length=100)),
                ('description', models.TextField(blank=True, default='')),
                ('performance_level', models.CharField(blank=True, choices=[('a', 'PL a'), ('b', 'PL b'), ('c', 'PL c'), ('d', 'PL d'), ('e', 'PL e')], default='', help_text='Required Performance Level nach ISO 13849', max_length=5)),
                ('sil_level', models.CharField(blank=True, choices=[('1', 'SIL 1'), ('2', 'SIL 2'), ('3', 'SIL 3')], default='', help_text='Safety Integrity Level nach IEC 62061', max_length=5)),
                ('monitoring_method', models.CharField(choices=[('continuous', 'Kontinuierlich'), ('periodic', 'Periodisch'), ('demand', 'Bei Anforderung')], default='continuous', max_length=20)),
                ('response_time_ms', models.IntegerField(blank=True, help_text='Ansprechzeit in Millisekunden', null=True)),
                ('proof_test_interval_months', models.IntegerField(blank=True, help_text='Proof-Test-Intervall in Monaten', null=True)),
                ('reference_standards', models.ManyToManyField(blank=True, related_name='safety_functions', to='explosionsschutz.referencestandard')),
            ],
            options={
                'verbose_name': 'Sicherheitsfunktion',
                'verbose_name_plural': 'Sicherheitsfunktionen',
                'db_table': 'ex_safety_function',
            },
        ),
        migrations.CreateModel(
            name='ProtectionMeasure',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('category', models.CharField(choices=[('primary', 'Primäre Maßnahme (Vermeidung)'), ('secondary', 'Sekundäre Maßnahme (Zündquellenvermeidung)'), ('tertiary', 'Tertiäre Maßnahme (Auswirkungsbegrenzung)'), ('organizational', 'Organisatorische Maßnahme')], default='secondary', max_length=20)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, default='')),
                ('status', models.CharField(choices=[('open', 'Offen'), ('in_progress', 'In Bearbeitung'), ('done', 'Umgesetzt'), ('verified', 'Verifiziert'), ('obsolete', 'Obsolet')], default='open', max_length=20)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_notes', models.TextField(blank=True, default='')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('catalog_reference', models.ForeignKey(blank=True, help_text='Vorlage aus Maßnahmenkatalog', null=True, on_delete=django.db.models.deletion.SET_NULL, to='explosionsschutz.measurecatalog')),
                ('concept', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='measures', to='explosionsschutz.explosionconcept')),
                ('responsible_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='responsible_measures', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_measures', to=settings.AUTH_USER_MODEL)),
                ('safety_function', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='measures', to='explosionsschutz.safetyfunction')),
            ],
            options={
                'verbose_name': 'Schutzmaßnahme',
                'verbose_name_plural': 'Schutzmaßnahmen',
                'db_table': 'ex_protection_measure',
                'ordering': ['category', 'title'],
            },
        ),
        migrations.CreateModel(
            name='VerificationDocument',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('title', models.CharField(max_length=255)),
                ('document_type', models.CharField(choices=[('certificate', 'Prüfbescheinigung'), ('report', 'Prüfbericht'), ('msr_test', 'MSR-Prüfprotokoll'), ('photo', 'Foto/Dokumentation'), ('drawing', 'Zeichnung/Plan'), ('approval', 'Genehmigung'), ('other', 'Sonstige')], default='other', max_length=20)),
                ('description', models.TextField(blank=True, default='')),
                ('file', models.FileField(blank=True, null=True, upload_to='exschutz/docs/%Y/%m/')),
                ('document_version_id', models.UUIDField(blank=True, help_text='FK zu documents.DocumentVersion', null=True)),
                ('issued_at', models.DateField(blank=True, null=True)),
                ('issued_by', models.CharField(blank=True, default='', max_length=200)),
                ('valid_until', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('concept', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='explosionsschutz.explosionconcept')),
                ('uploaded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Nachweisdokument',
                'verbose_name_plural': 'Nachweisdokumente',
                'db_table': 'ex_verification_document',
                'ordering': ['-issued_at'],
            },
        ),
        migrations.CreateModel(
            name='ZoneDefinition',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('zone_type', models.CharField(choices=[('0', 'Zone 0 (Gas/Dampf, ständig)'), ('1', 'Zone 1 (Gas/Dampf, gelegentlich)'), ('2', 'Zone 2 (Gas/Dampf, selten)'), ('20', 'Zone 20 (Staub, ständig)'), ('21', 'Zone 21 (Staub, gelegentlich)'), ('22', 'Zone 22 (Staub, selten)'), ('non_ex', 'Nicht Ex-Bereich')], default='2', max_length=10)),
                ('name', models.CharField(help_text="Bezeichnung der Zone (z.B. 'Abfüllbereich Tank 1')", max_length=200)),
                ('description', models.TextField(blank=True, default='')),
                ('justification', models.TextField(blank=True, default='', help_text='Begründung für Zoneneinteilung')),
                ('extent', models.JSONField(blank=True, help_text='Geometrie als GeoJSON (Point, Polygon, etc.)', null=True)),
                ('extent_horizontal_m', models.DecimalField(blank=True, decimal_places=2, help_text='Horizontale Ausdehnung in Metern', max_digits=8, null=True)),
                ('extent_vertical_m', models.DecimalField(blank=True, decimal_places=2, help_text='Vertikale Ausdehnung in Metern', max_digits=8, null=True)),
                ('reference_section', models.CharField(blank=True, default='', help_text="Abschnitt im Regelwerk (z.B. '4.2.1')", max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('concept', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='zones', to='explosionsschutz.explosionconcept')),
                ('reference_standard', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='zone_definitions', to='explosionsschutz.referencestandard')),
            ],
            options={
                'verbose_name': 'Zonendefinition',
                'verbose_name_plural': 'Zonendefinitionen',
                'db_table': 'ex_zone_definition',
            },
        ),
        migrations.AddField(
            model_name='equipment',
            name='zone',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='equipment', to='explosionsschutz.zonedefinition'),
        ),
        migrations.CreateModel(
            name='ZoneIgnitionSourceAssessment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('ignition_source', models.CharField(choices=[('S1', 'Heiße Oberflächen'), ('S2', 'Flammen und heiße Gase'), ('S3', 'Mechanisch erzeugte Funken'), ('S4', 'Elektrische Anlagen'), ('S5', 'Kathodischer Korrosionsschutz / Streuströme'), ('S6', 'Statische Elektrizität'), ('S7', 'Blitzschlag'), ('S8', 'Elektromagnetische Felder (HF)'), ('S9', 'Optische Strahlung'), ('S10', 'Ionisierende Strahlung'), ('S11', 'Ultraschall'), ('S12', 'Adiabatische Kompression / Stoßwellen'), ('S13', 'Exotherme Reaktionen')], max_length=10)),
                ('is_present', models.BooleanField(default=False, help_text='Ist diese Zündquelle im Bereich vorhanden?')),
                ('is_effective', models.BooleanField(default=False, help_text='Kann diese Zündquelle wirksam werden (Energie ausreichend)?')),
                ('mitigation', models.TextField(blank=True, default='', help_text='Beschreibung der Schutzmaßnahmen gegen diese Zündquelle')),
                ('assessed_at', models.DateTimeField(blank=True, null=True)),
                ('assessed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ignition_assessments', to='explosionsschutz.zonedefinition')),
            ],
            options={
                'verbose_name': 'Zündquellen-Bewertung',
                'verbose_name_plural': 'Zündquellen-Bewertungen',
                'db_table': 'ex_zone_ignition_assessment',
            },
        ),
        migrations.AddIndex(
            model_name='explosionconcept',
            index=models.Index(fields=['tenant_id', 'status'], name='ex_concept_tenant__8e03b6_idx'),
        ),
        migrations.AddIndex(
            model_name='measurecatalog',
            index=models.Index(fields=['tenant_id', 'default_type'], name='ex_measure__tenant__1f9ea3_idx'),
        ),
        migrations.AddConstraint(
            model_name='measurecatalog',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'title'), name='uq_measure_catalog_tenant_title'),
        ),
        migrations.AddConstraint(
            model_name='safetyfunction',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'name'), name='uq_safety_function_tenant_name'),
        ),
        migrations.AddIndex(
            model_name='equipment',
            index=models.Index(fields=['tenant_id', 'next_inspection_date'], name='ex_equipmen_tenant__86a6a4_idx'),
        ),
        migrations.AddConstraint(
            model_name='zoneignitionsourceassessment',
            constraint=models.UniqueConstraint(fields=('zone', 'ignition_source'), name='uq_zone_ignition_source'),
        ),
    ]
