# Generated by Django 5.2.11 on 2026-02-16 14:15

import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=50, unique=True)),
                ('label', models.CharField(max_length=200)),
                ('is_special_category', models.BooleanField(default=False, help_text='Art. 9 besondere Kategorie (Gesundheit, Religion, etc.)')),
            ],
            options={
                'verbose_name': 'Datenkategorie',
                'verbose_name_plural': 'Datenkategorien',
                'db_table': 'dsb_category',
                'ordering': ['key'],
            },
        ),
        migrations.CreateModel(
            name='Purpose',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=80, unique=True)),
                ('label', models.CharField(max_length=300)),
            ],
            options={
                'verbose_name': 'Verarbeitungszweck',
                'verbose_name_plural': 'Verarbeitungszwecke',
                'db_table': 'dsb_purpose',
                'ordering': ['key'],
            },
        ),
        migrations.CreateModel(
            name='Recipient',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=50, unique=True)),
                ('label', models.CharField(max_length=200)),
            ],
            options={
                'verbose_name': 'Empfängerkategorie',
                'verbose_name_plural': 'Empfängerkategorien',
                'db_table': 'dsb_recipient',
                'ordering': ['key'],
            },
        ),
        migrations.CreateModel(
            name='StandardRetentionPeriod',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=80, unique=True)),
                ('label', models.CharField(max_length=300)),
                ('legal_reference', models.CharField(help_text="Gesetzliche Grundlage (z.B. '§ 257 HGB')", max_length=200)),
                ('period', models.CharField(help_text="Frist (z.B. '10 Jahre', 'unverzüglich')", max_length=100)),
                ('notes', models.TextField(blank=True, default='')),
            ],
            options={
                'verbose_name': 'Löschfrist (Stammdaten)',
                'verbose_name_plural': 'Löschfristen (Stammdaten)',
                'db_table': 'dsb_standard_retention',
                'ordering': ['key'],
            },
        ),
        migrations.CreateModel(
            name='SubjectGroup',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=50, unique=True)),
                ('label', models.CharField(max_length=200)),
            ],
            options={
                'verbose_name': 'Betroffenengruppe',
                'verbose_name_plural': 'Betroffenengruppen',
                'db_table': 'dsb_subject_group',
                'ordering': ['key'],
            },
        ),
        migrations.CreateModel(
            name='TomCategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=80, unique=True)),
                ('label', models.CharField(max_length=300)),
                ('measure_type', models.CharField(choices=[('technical', 'Technisch'), ('organizational', 'Organisatorisch')], help_text='Art der Maßnahme', max_length=20)),
                ('description', models.TextField(blank=True, default='', help_text='Beschreibung / Best Practice')),
            ],
            options={
                'verbose_name': 'TOM-Katalog (Stammdaten)',
                'verbose_name_plural': 'TOM-Katalog (Stammdaten)',
                'db_table': 'dsb_tom_category',
                'ordering': ['measure_type', 'key'],
            },
        ),
        migrations.CreateModel(
            name='Mandate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('name', models.CharField(max_length=200)),
                ('industry', models.CharField(blank=True, choices=[('healthcare', 'Gesundheitswesen'), ('finance', 'Finanzwesen'), ('public_sector', 'Öffentlicher Dienst'), ('education', 'Bildung'), ('it_telecom', 'IT & Telekommunikation'), ('manufacturing', 'Produzierendes Gewerbe'), ('retail', 'Handel'), ('logistics', 'Logistik'), ('energy', 'Energie'), ('other', 'Sonstige')], default='', help_text='Branche des betreuten Unternehmens', max_length=20)),
                ('employee_count', models.IntegerField(blank=True, help_text='Anzahl Beschäftigte (für Meldepflichten relevant)', null=True)),
                ('dsb_appointed_date', models.DateField(help_text='Datum der DSB-Bestellung')),
                ('contract_end_date', models.DateField(blank=True, help_text='Vertragsende (NULL = unbefristet)', null=True)),
                ('supervisory_authority', models.CharField(blank=True, default='', help_text='Zuständige Aufsichtsbehörde (z.B. LfDI Baden-Württemberg)', max_length=200)),
                ('status', models.CharField(choices=[('active', 'Aktiv'), ('paused', 'Pausiert'), ('terminated', 'Beendet')], default='active', max_length=20)),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Mandat',
                'verbose_name_plural': 'Mandate',
                'db_table': 'dsb_mandate',
                'ordering': ['name'],
                'indexes': [models.Index(fields=['tenant_id', 'status'], name='idx_dsb_mandate_tenant_status')],
                'constraints': [models.UniqueConstraint(fields=('tenant_id', 'name'), name='uq_dsb_mandate_tenant_name'), models.CheckConstraint(condition=models.Q(('status__in', ['active', 'paused', 'terminated'])), name='ck_dsb_mandate_status')],
            },
        ),
        migrations.CreateModel(
            name='OrganizationalMeasure',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, default='')),
                ('status', models.CharField(choices=[('planned', 'Geplant'), ('implemented', 'Umgesetzt'), ('verified', 'Verifiziert'), ('obsolete', 'Obsolet')], default='planned', max_length=20)),
                ('responsible_user_id', models.UUIDField(blank=True, help_text='Verantwortliche Person (User-ID)', null=True)),
                ('review_date', models.DateField(blank=True, help_text='Nächster Überprüfungstermin', null=True)),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='organizational_measures', to='dsb.mandate')),
                ('category', models.ForeignKey(blank=True, help_text='Referenz auf TOM-Katalog (Stammdaten)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='organizational_instances', to='dsb.tomcategory')),
            ],
            options={
                'verbose_name': 'Organisatorische Maßnahme',
                'verbose_name_plural': 'Organisatorische Maßnahmen',
                'db_table': 'dsb_organizational_measure',
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='PrivacyAudit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('title', models.CharField(help_text='Titel / Gegenstand des Audits', max_length=300)),
                ('audit_type', models.CharField(choices=[('internal', 'Intern'), ('external', 'Extern'), ('spot_check', 'Stichprobe')], max_length=20)),
                ('scheduled_date', models.DateField()),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('planned', 'Geplant'), ('in_progress', 'In Durchführung'), ('completed', 'Abgeschlossen'), ('cancelled', 'Abgebrochen')], default='planned', max_length=20)),
                ('report_document_id', models.UUIDField(blank=True, db_index=True, help_text='FK zu documents.Document (lose Kopplung)', null=True)),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='audits', to='dsb.mandate')),
            ],
            options={
                'verbose_name': 'Datenschutz-Audit',
                'verbose_name_plural': 'Datenschutz-Audits',
                'db_table': 'dsb_privacy_audit',
                'ordering': ['-scheduled_date'],
            },
        ),
        migrations.CreateModel(
            name='AuditFinding',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('title', models.CharField(max_length=240)),
                ('description', models.TextField(blank=True, default='')),
                ('severity', models.CharField(choices=[('low', 'Gering'), ('medium', 'Mittel'), ('high', 'Hoch'), ('critical', 'Kritisch')], max_length=20)),
                ('status', models.CharField(choices=[('open', 'Offen'), ('in_progress', 'In Bearbeitung'), ('resolved', 'Behoben'), ('accepted', 'Akzeptiert')], default='open', max_length=20)),
                ('action_item_id', models.UUIDField(blank=True, db_index=True, help_text='FK zu actions.ActionItem (lose Kopplung)', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('audit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='findings', to='dsb.privacyaudit')),
            ],
            options={
                'verbose_name': 'Audit-Befund',
                'verbose_name_plural': 'Audit-Befunde',
                'db_table': 'dsb_audit_finding',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProcessingActivity',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('number', models.PositiveIntegerField(help_text='Laufende Nummer im Mandat (z.B. 1, 2, 3)')),
                ('name', models.CharField(max_length=300)),
                ('description', models.TextField(blank=True, default='', help_text='Ergänzende Beschreibung der Verarbeitung')),
                ('legal_basis', models.CharField(choices=[('consent', 'Art. 6(1)(a) Einwilligung'), ('contract', 'Art. 6(1)(b) Vertragserfüllung'), ('legal_obligation', 'Art. 6(1)(c) Rechtl. Verpflichtung'), ('vital_interest', 'Art. 6(1)(d) Lebenswichtige Interessen'), ('public_interest', 'Art. 6(1)(e) Öffentliches Interesse'), ('legitimate_interest', 'Art. 6(1)(f) Berechtigtes Interesse')], help_text='Rechtsgrundlage nach Art. 6 Abs. 1 DSGVO', max_length=30)),
                ('risk_level', models.CharField(choices=[('low', 'Gering'), ('medium', 'Mittel'), ('high', 'Hoch'), ('very_high', 'Sehr hoch')], default='low', max_length=20)),
                ('dsfa_required', models.BooleanField(default=False, help_text='DSFA erforderlich (Art. 35 DSGVO)')),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('data_categories', models.ManyToManyField(blank=True, help_text='Kategorien personenbezogener Daten', to='dsb.category')),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='processing_activities', to='dsb.mandate')),
                ('organizational_measures', models.ManyToManyField(blank=True, help_text='Zugeordnete organisatorische Maßnahmen', to='dsb.organizationalmeasure')),
                ('purposes', models.ManyToManyField(blank=True, help_text='Zwecke der Verarbeitung (Art. 30 Abs. 1 lit. b)', to='dsb.purpose')),
                ('recipients', models.ManyToManyField(blank=True, help_text='Empfängerkategorien (Art. 30 Abs. 1 lit. d)', to='dsb.recipient')),
                ('data_subjects', models.ManyToManyField(blank=True, help_text='Kategorien betroffener Personen', to='dsb.subjectgroup')),
            ],
            options={
                'verbose_name': 'Verarbeitungstätigkeit',
                'verbose_name_plural': 'Verarbeitungstätigkeiten',
                'db_table': 'dsb_processing_activity',
                'ordering': ['mandate', 'number'],
            },
        ),
        migrations.CreateModel(
            name='DeletionLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('requested_at', models.DateTimeField()),
                ('executed_at', models.DateTimeField(blank=True, null=True)),
                ('record_count', models.IntegerField(blank=True, help_text='Anzahl gelöschter Datensätze', null=True)),
                ('method', models.CharField(help_text="Löschmethode (z.B. 'DB DELETE', 'Aktenvernichtung')", max_length=100)),
                ('confirmed_by_id', models.UUIDField(blank=True, help_text='User-ID des Bestätigenden (lose Kopplung)', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('data_category', models.ForeignKey(help_text='Gelöschte Datenkategorie', on_delete=django.db.models.deletion.PROTECT, to='dsb.category')),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='deletion_logs', to='dsb.mandate')),
                ('processing_activity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='deletion_logs', to='dsb.processingactivity')),
            ],
            options={
                'verbose_name': 'Löschprotokoll',
                'verbose_name_plural': 'Löschprotokolle',
                'db_table': 'dsb_deletion_log',
                'ordering': ['-requested_at'],
            },
        ),
        migrations.CreateModel(
            name='RetentionRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('condition', models.CharField(help_text="Bedingung (z.B. 'bei fehlender Reaktion')", max_length=200)),
                ('period', models.CharField(help_text="Frist (z.B. '6-12 Monate', 'unverzüglich')", max_length=100)),
                ('legal_reference', models.CharField(blank=True, default='', help_text="Gesetzliche Grundlage (z.B. '§ 257 HGB')", max_length=200)),
                ('processing_activity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='retention_rules', to='dsb.processingactivity')),
                ('standard_period', models.ForeignKey(blank=True, help_text='Referenz auf Löschfristen-Stammdaten', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='usages', to='dsb.standardretentionperiod')),
            ],
            options={
                'verbose_name': 'Löschfrist',
                'verbose_name_plural': 'Löschfristen',
                'db_table': 'dsb_retention_rule',
                'ordering': ['condition'],
            },
        ),
        migrations.CreateModel(
            name='TechnicalMeasure',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, default='')),
                ('status', models.CharField(choices=[('planned', 'Geplant'), ('implemented', 'Umgesetzt'), ('verified', 'Verifiziert'), ('obsolete', 'Obsolet')], default='planned', max_length=20)),
                ('responsible_user_id', models.UUIDField(blank=True, help_text='Verantwortliche Person (User-ID)', null=True)),
                ('review_date', models.DateField(blank=True, help_text='Nächster Überprüfungstermin', null=True)),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='technical_measures', to='dsb.mandate')),
                ('category', models.ForeignKey(blank=True, help_text='Referenz auf TOM-Katalog (Stammdaten)', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='technical_instances', to='dsb.tomcategory')),
            ],
            options={
                'verbose_name': 'Technische Maßnahme',
                'verbose_name_plural': 'Technische Maßnahmen',
                'db_table': 'dsb_technical_measure',
                'ordering': ['title'],
            },
        ),
        migrations.AddField(
            model_name='processingactivity',
            name='technical_measures',
            field=models.ManyToManyField(blank=True, help_text='Zugeordnete technische Maßnahmen', to='dsb.technicalmeasure'),
        ),
        migrations.CreateModel(
            name='DataProcessingAgreement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('partner_name', models.CharField(help_text='Name des Vertragspartners', max_length=300)),
                ('partner_role', models.CharField(choices=[('controller', 'Verantwortlicher'), ('processor', 'Auftragsverarbeiter'), ('joint', 'Gemeinsam Verantwortliche')], default='processor', help_text='Rolle des Partners im Vertrag', max_length=20)),
                ('subject_matter', models.TextField(help_text='Gegenstand der Auftragsverarbeitung')),
                ('status', models.CharField(choices=[('draft', 'Entwurf'), ('active', 'Aktiv'), ('expired', 'Abgelaufen'), ('terminated', 'Gekündigt')], default='draft', max_length=20)),
                ('effective_date', models.DateField(blank=True, help_text='Inkrafttreten', null=True)),
                ('expiry_date', models.DateField(blank=True, help_text='Ablaufdatum / Kündigungstermin', null=True)),
                ('subprocessors_allowed', models.BooleanField(default=False, help_text='Unterauftragsverarbeitung zulässig')),
                ('subprocessors_notes', models.TextField(blank=True, default='', help_text='Hinweise zu Unterauftragsverarbeitern')),
                ('document_id', models.UUIDField(blank=True, db_index=True, help_text='FK zu documents.Document (lose Kopplung)', null=True)),
                ('notes', models.TextField(blank=True, default='')),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('updated_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('data_categories', models.ManyToManyField(blank=True, help_text='Verarbeitete Datenkategorien', to='dsb.category')),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='dpa_agreements', to='dsb.mandate')),
                ('organizational_measures', models.ManyToManyField(blank=True, help_text='Vereinbarte organisatorische Maßnahmen', to='dsb.organizationalmeasure')),
                ('processing_activities', models.ManyToManyField(blank=True, help_text='Zugeordnete Verarbeitungstätigkeiten', related_name='dpa_agreements', to='dsb.processingactivity')),
                ('data_subjects', models.ManyToManyField(blank=True, help_text='Betroffene Personengruppen', to='dsb.subjectgroup')),
                ('technical_measures', models.ManyToManyField(blank=True, help_text='Vereinbarte technische Maßnahmen', to='dsb.technicalmeasure')),
            ],
            options={
                'verbose_name': 'Auftragsverarbeitungsvertrag',
                'verbose_name_plural': 'Auftragsverarbeitungsverträge',
                'db_table': 'dsb_dpa',
                'ordering': ['partner_name'],
            },
        ),
        migrations.CreateModel(
            name='ThirdCountryTransfer',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('country', models.CharField(help_text='Zielland (z.B. USA, Indien)', max_length=100)),
                ('recipient_entity', models.CharField(blank=True, default='', help_text='Empfänger im Drittland (z.B. LinkedIn)', max_length=200)),
                ('safeguard', models.CharField(choices=[('scc', 'Standardvertragsklauseln (SCC)'), ('dpf', 'Data Privacy Framework (DPF)'), ('bcr', 'Binding Corporate Rules (BCR)'), ('adequacy', 'Angemessenheitsbeschluss'), ('consent', 'Einwilligung (Art. 49)'), ('other', 'Sonstige')], help_text='Absicherungsmechanismus (Art. 46 DSGVO)', max_length=20)),
                ('notes', models.TextField(blank=True, default='', help_text='Ergänzende Hinweise')),
                ('processing_activity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='third_country_transfers', to='dsb.processingactivity')),
            ],
            options={
                'verbose_name': 'Drittlandübermittlung',
                'verbose_name_plural': 'Drittlandübermittlungen',
                'db_table': 'dsb_third_country_transfer',
                'ordering': ['country'],
            },
        ),
        migrations.CreateModel(
            name='Breach',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tenant_id', models.UUIDField(db_index=True)),
                ('discovered_at', models.DateTimeField()),
                ('reported_to_authority_at', models.DateTimeField(blank=True, help_text='Meldezeitpunkt an Aufsichtsbehörde', null=True)),
                ('severity', models.CharField(choices=[('low', 'Gering'), ('medium', 'Mittel'), ('high', 'Hoch'), ('critical', 'Kritisch')], max_length=20)),
                ('affected_count', models.IntegerField(blank=True, help_text='Ungefähre Anzahl betroffener Personen', null=True)),
                ('root_cause', models.TextField(blank=True, default='')),
                ('measures_taken', models.TextField(blank=True, default='', help_text='Ergriffene Abhilfemaßnahmen (Art. 33 Abs. 3 lit. d)')),
                ('notified_subjects', models.BooleanField(default=False, help_text='Betroffene benachrichtigt (Art. 34 DSGVO)')),
                ('created_by_id', models.UUIDField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('affected_categories', models.ManyToManyField(blank=True, help_text='Betroffene Datenkategorien (Art. 33 Abs. 3 lit. a)', to='dsb.category')),
                ('mandate', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='breaches', to='dsb.mandate')),
            ],
            options={
                'verbose_name': 'Datenpanne',
                'verbose_name_plural': 'Datenpannen',
                'db_table': 'dsb_breach',
                'ordering': ['-discovered_at'],
                'indexes': [models.Index(fields=['tenant_id', 'severity'], name='idx_dsb_breach_tenant_sev')],
            },
        ),
        migrations.AddIndex(
            model_name='privacyaudit',
            index=models.Index(fields=['tenant_id', 'status'], name='idx_dsb_audit_tenant_status'),
        ),
        migrations.AddIndex(
            model_name='auditfinding',
            index=models.Index(fields=['tenant_id', 'status'], name='idx_dsb_finding_tenant_status'),
        ),
        migrations.AddIndex(
            model_name='deletionlog',
            index=models.Index(fields=['tenant_id', 'mandate'], name='idx_dsb_del_tenant_mandate'),
        ),
        migrations.AddIndex(
            model_name='processingactivity',
            index=models.Index(fields=['tenant_id', 'mandate'], name='idx_dsb_vvt_tenant_mandate'),
        ),
        migrations.AddConstraint(
            model_name='processingactivity',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'mandate', 'name'), name='uq_dsb_vvt_name_per_mandate'),
        ),
        migrations.AddConstraint(
            model_name='processingactivity',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'mandate', 'number'), name='uq_dsb_vvt_num_per_mandate'),
        ),
        migrations.AddIndex(
            model_name='dataprocessingagreement',
            index=models.Index(fields=['tenant_id', 'status'], name='idx_dsb_dpa_tenant_status'),
        ),
        migrations.AddIndex(
            model_name='technicalmeasure',
            index=models.Index(fields=['tenant_id', 'status'], name='idx_dsb_tech_measure_status'),
        ),
        migrations.AddConstraint(
            model_name='technicalmeasure',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'mandate', 'title'), name='uq_dsb_tech_meas_mandate'),
        ),
        migrations.AddIndex(
            model_name='organizationalmeasure',
            index=models.Index(fields=['tenant_id', 'status'], name='idx_dsb_org_measure_status'),
        ),
        migrations.AddConstraint(
            model_name='organizationalmeasure',
            constraint=models.UniqueConstraint(fields=('tenant_id', 'mandate', 'title'), name='uq_dsb_org_meas_mandate'),
        ),
    ]
