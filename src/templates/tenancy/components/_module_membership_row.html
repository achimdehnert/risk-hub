{% load tenancy_components %}
<tr class="hover:bg-gray-50" id="mm-row-{{ mm.pk }}">
    <td class="px-4 py-3 text-sm">
        <div class="flex items-center gap-2">
            <div class="w-7 h-7 bg-gray-200 rounded-full flex items-center justify-center">
                <i data-lucide="user" class="w-3.5 h-3.5 text-gray-500"></i>
            </div>
            <div>
                <div class="font-medium text-gray-900">{{ mm.user.get_full_name|default:mm.user.username }}</div>
                <div class="text-xs text-gray-400">{{ mm.user.username }}</div>
            </div>
        </div>
    </td>
    <td class="px-4 py-3 text-sm text-gray-500">{{ mm.user.email }}</td>
    <td class="px-4 py-3 text-sm">
        {% if mm.role == "admin" %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Admin</span>
        {% elif mm.role == "manager" %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">Manager</span>
        {% elif mm.role == "member" %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Member</span>
        {% else %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700">Viewer</span>
        {% endif %}
    </td>
    <td class="px-4 py-3 text-sm text-gray-500">
        {{ mm.granted_at|date:"d.m.Y" }}
        {% if mm.expires_at %}
        <div class="text-xs text-amber-600">bis {{ mm.expires_at|date:"d.m.Y" }}</div>
        {% endif %}
    </td>
    <td class="px-4 py-3 text-sm text-right space-x-1">
        <a href="{% url 'tenancy:module-membership-role' org.pk mm.module mm.pk %}"
           class="text-blue-600 hover:text-blue-800" title="Rolle Ã¤ndern">
            <i data-lucide="shield" class="w-4 h-4 inline"></i>
        </a>
        <form method="post"
              action="{% url 'tenancy:module-membership-revoke' org.pk mm.module mm.pk %}"
              class="inline"
              onsubmit="return confirm('Modulzugang entziehen?')">
            {% csrf_token %}
            <button type="submit" class="text-red-500 hover:text-red-700" title="Zugang entziehen">
                <i data-lucide="user-minus" class="w-4 h-4 inline"></i>
            </button>
        </form>
    </td>
</tr>
